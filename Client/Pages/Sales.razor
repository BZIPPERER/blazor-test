@page "/sales"
@using MafiaApplication.Shared.Models
<h1>Liste <b>Verkauf</b> GÃ¼ter-u-Region</h1>
<table class="table">
<thead>
    <tr style="background-color:grey;color:white">
        <td>
          Anzeige Id    
        </td>
        <td>
          Anzeige Land
        </td>
        <td>
         curse @control
        </td>

          <td></td>
    </tr>
</thead>
<tbody>

    @foreach (var item in moon)
    {
        <tr>
            <td>1</td>
            <td>@item.Country.ToString()</td>
            <td>@item.Region.ToString()</td>
             <td>
                <button class="btn btn-primary" >Record entfernen</button>
            </td>
        </tr>

    }
</tbody>



</table>


<p>Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

@code 
{
   
    @using System.Collections.ObjectModel;
    @using Sylvan.Data;
    @using Sylvan.Data.Csv; 
    @using CsvHelper
    @using System.IO
    @using System.Text 
    @using System.Globalization
    @using System.Collections.Generic;

    private int currentCount = 0;
    private string control = "";
    private ObservableCollection<SalesItem> moon = 
        new ObservableCollection<SalesItem>();
 
    protected override async Task OnInitializedAsync()
    {
        currentCount = 1000;
       
        control = "init";
        IEnumerable<SalesItem> records;
        var fileName = @"C:\\Libre.csv";
        using (var reader = new StreamReader(fileName))
        {
            using (var csv = new CsvReader(reader, CultureInfo.InvariantCulture))
            {
                records = csv.GetRecords<SalesItem>();
            }
            foreach (var single in records)
            {
            // Do something with values in each row
            Console.WriteLine(single.Region);
            }
        }
    }

        
        /*
        for(int i = 0 ; i < 10 ; i++)
        {
            SalesItem normal = new SalesItem()
            {
                OrderID = 1,
                Country = "count",
                Region = "FOO"
            };
            moon.Add(normal);
        }*/
    
    private void IncrementCount()
    {
        currentCount++;
    }


}
